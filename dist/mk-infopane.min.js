!function(){var e=function(){var e=document.createElement("div");return e.className="infopane",document.body.appendNode(e),e},t=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");if(!n.test(e.className))return e.className=(e.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""),e},n=function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(n,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,"")},i=function(e,t){void 0===e&&(e={});for(var n=1;n<arguments.length;n++){t=arguments[n];for(var i in t)t.hasOwnProperty(i)&&void 0===e[i]&&(e[i]=t[i])}return e},s=function(e,t){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)},o=function(e){this.published=!1,this.pane=null,this.options=e,this.element=this._newElement(),this.body=this.element.querySelector(".msg-body")};o.prototype={publish:function(e){if(!this.published){this.pane=e,s(this.pane.paneEl,this.element),this.published=!0;var t=this;this.options.duration&&setTimeout(this.unpublish.bind(this),this.options.duration),setTimeout(function(){n(t.element,"msg-appear")},1e3),this.pane.options.onMessage&&this.pane.options.onMessage.call(this.pane,this)}},unpublish:function(){if(this.published){this.published=!1;var e=this;e.element.className+=" msg-hide",setTimeout(function(){e.element.parentNode.removeChild(e.element),delete e.element},1e3),this.pane.options.onMessageRemove&&this.pane.options.onMessageRemove.call(this.pane,this)}},put:function(e){this.body.innerHTML=e},append:function(e){this.body.innerHTML+=e},suicide:function(){this.unpublish(),delete this.published,this.pane,this.options,this.element,delete this},_newElement:function(){var e=document.createElement("div");if(e.className="infopane-msg msg-appear msg-"+this.options.type,e.innerHTML='<div class="msg-body">'+this.options.text+"</div>",this.options.closeBut){var t=document.createElement("div");t.className="msg-close",t.onclick=this.unpublish.bind(this),e.appendChild(t)}return e}};var a=function(n,s){this.options=i(s,this.defaults),this.paneEl=n?t(n,"infopane"):e(),this.paneEl.style[this.options.collapse?"max-height":"height"]=this.options.height+"px"};a.prototype={defaults:{height:36,collapse:!1,onMessage:null,onMessageRemove:null,text:"",type:"echo",duration:3e3,closeBut:!0},print:function(e){i(e,this.deafaults),e.pane=this;var t=new o(e).publish(this);return t},echo:function(e,t){return t||(t={}),t.type="echo",t.text=e,this.print(t)},ok:function(e,t){return t||(t={}),t.type="ok",t.text=e,this.print(t)},warn:function(e,t){return t||(t={}),t.type="warn",t.text=e,this.print(t)},err:function(e,t){return t||(t={}),t.type="err",t.text=e,this.print(t)},info:function(e,t){return t||(t={}),t.type="info",t.text=e,this.print(t)},_prependPane:function(e){var t=this.paneEl.firstChild;t?this.paneEl.insertBefore(e,t):this.paneEl.appendChild(e)}},a.update=function(e,t){if(_que[e]){var n=_que[e];n.querySelector(".msg-body").innerHtml=t}},mk=window.mk||{},mk.Infopane=a}();